# ğŸ¨ VisualizaÃ§Ã£o da Arquitetura gRPC

## ğŸ“Š Diagrama Completo do Sistema

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   ğŸŒ SISTEMA DE GERENCIAMENTO DE PEDIDOS                   â•‘
â•‘                       Arquitetura gRPC DistribuÃ­da                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  Navegador do User  â”‚
                            â”‚  (http://....:8080) â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ HTTP/HTTPS
                                       â–¼
           â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘           CAMADA DE APRESENTAÃ‡ÃƒO (PORT 8080)        â•‘
           â•‘    Frontend: Next.js 16 + TypeScript + React 19     â•‘
           â•‘                                                      â•‘
           â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
           â•‘  â”‚ Componentes:                                  â”‚   â•‘
           â•‘  â”‚ â€¢ FormulÃ¡rio de CriaÃ§Ã£o de Pedido             â”‚   â•‘
           â•‘  â”‚ â€¢ FormulÃ¡rio de Consulta de Status            â”‚   â•‘
           â•‘  â”‚ â€¢ Diagrama de Arquitetura Visual              â”‚   â•‘
           â•‘  â”‚ â€¢ Styling com TailwindCSS 4                   â”‚   â•‘
           â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
           â•‘                      â”‚                               â•‘
           â•‘  callGrpcService()   â”‚ Chamada gRPC                 â•‘
           â•‘                      â–¼                               â•‘
           â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
           â•‘  â”‚ Cliente gRPC Web (JSON-RPC)                   â”‚   â•‘
           â•‘  â”‚ â€¢ CreateOrder("JoÃ£o", [...], 3500)            â”‚   â•‘
           â•‘  â”‚ â€¢ GetOrderStatus("550e8400-...")              â”‚   â•‘
           â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                       â”‚
                    â”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”“
                    â”‚   gRPC Channel (TCP)              â”‚
                    â”‚   Protocol: Protocol Buffers      â”‚
                    â”‚   Port: 9090                      â”‚
                    â”‚   Host: grpc-gateway:9090         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
           â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘         CAMADA DE GATEWAY/MIDDLEWARE (PORT 9090)     â•‘
           â•‘      Gateway gRPC: Node.js 20 + @grpc/grpc-js       â•‘
           â•‘                                                      â•‘
           â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
           â•‘  â”‚ gRPC Server Implementation:                  â”‚   â•‘
           â•‘  â”‚ â€¢ OrderService.CreateOrder()                 â”‚   â•‘
           â•‘  â”‚ â€¢ OrderService.GetOrderStatus()              â”‚   â•‘
           â•‘  â”‚ â€¢ Server Streaming (futuro)                  â”‚   â•‘
           â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
           â•‘                      â”‚                               â•‘
           â•‘                      â”‚ (Proxy gRPC)                 â•‘
           â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
           â•‘  â”‚ Cliente gRPC do Backend:                     â”‚    â•‘
           â•‘  â”‚ stub.CreateOrder(request, callback)          â”‚    â•‘
           â•‘  â”‚ stub.GetOrderStatus(request, callback)       â”‚    â•‘
           â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                       â”‚
                    â”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”“
                    â”‚   gRPC Channel (TCP)              â”‚
                    â”‚   Protocol: Protocol Buffers      â”‚
                    â”‚   Port: 50051                     â”‚
                    â”‚   Host: grpc-server:50051         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
           â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘        CAMADA DE NEGÃ“CIO/BACKEND (PORT 50051)       â•‘
           â•‘         Backend gRPC: Python 3.11 + grpcio          â•‘
           â•‘                                                      â•‘
           â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
           â•‘  â”‚ OrderService (gRPC Server):                  â”‚   â•‘
           â•‘  â”‚                                               â”‚   â•‘
           â•‘  â”‚  CreateOrder(request):                        â”‚   â•‘
           â•‘  â”‚    1. Gera UUID para order_id                â”‚   â•‘
           â•‘  â”‚    2. Cria objeto Order com status RECEIVED  â”‚   â•‘
           â•‘  â”‚    3. Persiste em Redis                      â”‚   â•‘
           â•‘  â”‚    4. Publica em RabbitMQ (fila: orders)     â”‚   â•‘
           â•‘  â”‚    5. Retorna CreateOrderResponse            â”‚   â•‘
           â•‘  â”‚                                               â”‚   â•‘
           â•‘  â”‚  GetOrderStatus(request):                     â”‚   â•‘
           â•‘  â”‚    1. Recupera order_id da request           â”‚   â•‘
           â•‘  â”‚    2. Busca em Redis: order:{order_id}       â”‚   â•‘
           â•‘  â”‚    3. Se encontrado, retorna GetOrderStatus  â”‚   â•‘
           â•‘  â”‚    4. Se nÃ£o encontrado, retorna erro        â”‚   â•‘
           â•‘  â”‚                                               â”‚   â•‘
           â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    â”‚                        â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                      â”‚    â”‚                      â”‚
         â–¼                      â–¼    â–¼                      â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ğŸ“¦ REDIS      â”‚      â”‚  ğŸ“¨ RabbitMQ     â”‚    â”‚              â”‚
   â”‚  Cache Store   â”‚      â”‚  Message Broker  â”‚    â”‚              â”‚
   â”‚  Port: 6379    â”‚      â”‚  Port: 5672      â”‚    â”‚              â”‚
   â”‚                â”‚      â”‚  Admin: 15672    â”‚    â”‚              â”‚
   â”‚ Armazena:      â”‚      â”‚                  â”‚    â”‚              â”‚
   â”‚ order:{id}={   â”‚      â”‚ Fila: orders     â”‚    â”‚              â”‚
   â”‚   customer_n.  â”‚      â”‚                  â”‚    â”‚              â”‚
   â”‚   items: [...] â”‚      â”‚ Mensagem:        â”‚    â”‚              â”‚
   â”‚   total: XXX   â”‚      â”‚ {order_id,       â”‚    â”‚ Order Worker â”‚
   â”‚   status: ...  â”‚      â”‚  customer_name,  â”‚    â”‚ (Python)     â”‚
   â”‚ }              â”‚      â”‚  items,          â”‚    â”‚              â”‚
   â”‚                â”‚      â”‚  total}          â”‚    â”‚              â”‚
   â”‚ TTL: 24 horas  â”‚      â”‚                  â”‚    â”‚ Consome de   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ RabbitMQ     â”‚
         â–²                          â”‚               â”‚              â”‚
         â”‚                          â”‚               â”‚ 1. Recebe    â”‚
         â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â–º 2. PROCESSING
         â”‚                                     â”‚    â”‚ 3. Processa  â”‚
         â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 4. PROCESSED  â”‚
         â”‚                          â”‚           â”‚ 5. Confirma     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              (Atualiza status)
                      
         Status Flow:
         RECEIVED â”€â”€â”€â”€â”€â”€â–º PROCESSING â”€â”€â”€â”€â”€â”€â–º PROCESSED
            (0s)           (30s)              (final)
```

---

## ğŸ”„ SequÃªncia de OperaÃ§Ãµes

### 1ï¸âƒ£ Criar um Novo Pedido

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND                                                            â”‚
â”‚ UsuÃ¡rio clica "Criar Pedido"                                       â”‚
â”‚                                                                      â”‚
â”‚ const response = await callGrpcService(                            â”‚
â”‚   'orderservice.OrderService/CreateOrder',                         â”‚
â”‚   {                                                                 â”‚
â”‚     customer_name: 'JoÃ£o Silva',                                   â”‚
â”‚     items: ['Notebook', 'Mouse'],                                  â”‚
â”‚     total: 2500.00                                                 â”‚
â”‚   }                                                                 â”‚
â”‚ );                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    ğŸš€ gRPC Call
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GATEWAY (Node.js)                                                   â”‚
â”‚ Recebe CreateOrder gRPC request                                     â”‚
â”‚                                                                      â”‚
â”‚ CreateOrder(call, callback) {                                       â”‚
â”‚   console.log('ğŸ“¤ Gateway recebeu:', call.request);                â”‚
â”‚   backendStub.CreateOrder(call.request, (err, response) => {      â”‚
â”‚     callback(null, response);                                       â”‚
â”‚   });                                                               â”‚
â”‚ }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    ğŸš€ gRPC Proxy
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND (Python)                                                    â”‚
â”‚ OrderService.CreateOrder(request, context)                         â”‚
â”‚                                                                      â”‚
â”‚ def CreateOrder(self, request, context):                           â”‚
â”‚   order_id = str(uuid.uuid4())  # â† Gera UUID                     â”‚
â”‚   order_data = {                                                    â”‚
â”‚     'customer_name': request.customer_name,                        â”‚
â”‚     'items': list(request.items),                                  â”‚
â”‚     'total': request.total,                                        â”‚
â”‚     'status': 'RECEIVED'  # â† Status inicial                       â”‚
â”‚   }                                                                  â”‚
â”‚                                                                      â”‚
â”‚   redis_client.set(f'order:{order_id}',                           â”‚
â”‚                    json.dumps(order_data))  # â† Persistir        â”‚
â”‚                                                                      â”‚
â”‚   self._publish_to_queue(order_id, request)  # â† Fila RabbitMQ   â”‚
â”‚                                                                      â”‚
â”‚   return CreateOrderResponse(                                       â”‚
â”‚     order_id=order_id,                                             â”‚
â”‚     status='RECEIVED'                                              â”‚
â”‚   )                                                                  â”‚
â”‚ }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                  â”‚
        â–¼                                  â–¼
   ğŸ“¦ REDIS                           ğŸ“¨ RabbitMQ
   SET order:550e8400-...={...}      PUSH orders fila
                                      
        â”‚                                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                  â† gRPC Response
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GATEWAY (Node.js)                                                   â”‚
â”‚ Retorna resposta ao Frontend                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                  â† gRPC Response
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND                                                            â”‚
â”‚ Exibe: "âœ… Pedido criado com sucesso! ID: 550e8400-..."           â”‚
â”‚ Limpa formulÃ¡rio                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    (Paralelo)
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ORDER WORKER (Python)                                               â”‚
â”‚ Consome mensagem da fila RabbitMQ                                   â”‚
â”‚                                                                      â”‚
â”‚ def callback(ch, method, properties, body):                        â”‚
â”‚   order_data = json.loads(body)                                    â”‚
â”‚   order_id = order_data['order_id']                                â”‚
â”‚                                                                      â”‚
â”‚   # Atualizar Redis: PROCESSING                                    â”‚
â”‚   order['status'] = 'PROCESSING'                                   â”‚
â”‚   redis_client.set(f'order:{order_id}', ...)                       â”‚
â”‚                                                                      â”‚
â”‚   time.sleep(30)  # â† Simular processamento                        â”‚
â”‚                                                                      â”‚
â”‚   # Atualizar Redis: PROCESSED                                     â”‚
â”‚   order['status'] = 'PROCESSED'                                    â”‚
â”‚   redis_client.set(f'order:{order_id}', ...)                       â”‚
â”‚                                                                      â”‚
â”‚   ch.basic_ack(delivery_tag=method.delivery_tag)                   â”‚
â”‚ }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    ğŸ“¦ REDIS
                 (Status atualizado)
```

### 2ï¸âƒ£ Consultar Status do Pedido

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND                                                            â”‚
â”‚ UsuÃ¡rio clica "Consultar Status"                                   â”‚
â”‚ Input: order_id = "550e8400-..."                                   â”‚
â”‚                                                                      â”‚
â”‚ const response = await callGrpcService(                            â”‚
â”‚   'orderservice.OrderService/GetOrderStatus',                      â”‚
â”‚   { order_id: "550e8400-..." }                                     â”‚
â”‚ );                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    ğŸš€ gRPC Call
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GATEWAY (Node.js)                                                   â”‚
â”‚ Recebe GetOrderStatus gRPC request                                  â”‚
â”‚                                                                      â”‚
â”‚ GetOrderStatus(call, callback) {                                    â”‚
â”‚   console.log('ğŸ“¥ Gateway recebeu:', call.request);                â”‚
â”‚   backendStub.GetOrderStatus(call.request, (err, response) => {   â”‚
â”‚     callback(null, response);                                       â”‚
â”‚   });                                                               â”‚
â”‚ }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    ğŸš€ gRPC Proxy
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND (Python)                                                    â”‚
â”‚ OrderService.GetOrderStatus(request, context)                      â”‚
â”‚                                                                      â”‚
â”‚ def GetOrderStatus(self, request, context):                        â”‚
â”‚   order_id = request.order_id  # "550e8400-..."                    â”‚
â”‚                                                                      â”‚
â”‚   order_json = redis_client.get(f'order:{order_id}')  # â† Redis   â”‚
â”‚                                                                      â”‚
â”‚   if not order_json:                                               â”‚
â”‚     context.set_code(grpc.StatusCode.NOT_FOUND)                   â”‚
â”‚     context.set_details('Pedido nÃ£o encontrado')                   â”‚
â”‚     return GetOrderStatusResponse()                                â”‚
â”‚                                                                      â”‚
â”‚   order = json.loads(order_json)                                   â”‚
â”‚                                                                      â”‚
â”‚   return GetOrderStatusResponse(                                    â”‚
â”‚     order_id=order_id,                                             â”‚
â”‚     customer_name=order['customer_name'],                          â”‚
â”‚     items=order['items'],                                          â”‚
â”‚     total=order['total'],                                          â”‚
â”‚     status=order['status']  # RECEIVED | PROCESSING | PROCESSED  â”‚
â”‚   )                                                                  â”‚
â”‚ }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                  â† gRPC Response
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GATEWAY (Node.js)                                                   â”‚
â”‚ Retorna resposta ao Frontend                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                  â† gRPC Response
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND                                                            â”‚
â”‚ Exibe detalhes do pedido:                                          â”‚
â”‚ â€¢ ID: 550e8400-...                                                â”‚
â”‚ â€¢ Cliente: JoÃ£o Silva                                              â”‚
â”‚ â€¢ Itens: Notebook, Mouse                                           â”‚
â”‚ â€¢ Total: R$ 2500.00                                                â”‚
â”‚ â€¢ Status: PROCESSED âœ…                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ PadrÃµes Utilizados

### 1. **Proxy Pattern**
Gateway atua como intermediÃ¡rio entre Frontend e Backend, abstraindo a complexidade

### 2. **Async Processing Pattern**
Worker processa pedidos de forma assÃ­ncrona usando RabbitMQ

### 3. **Cache-Aside Pattern**
Redis armazena dados hot para acesso rÃ¡pido

### 4. **Pub/Sub Pattern**
RabbitMQ publica eventos para mÃºltiplos consumidores (Worker)

---

## ğŸ“ Protocol Buffers

```protobuf
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ orderservice.OrderService {                         â”‚
â”‚   rpc CreateOrder(CreateOrderRequest)               â”‚
â”‚     returns (CreateOrderResponse)                   â”‚
â”‚                                                      â”‚
â”‚   rpc GetOrderStatus(GetOrderStatusRequest)         â”‚
â”‚     returns (GetOrderStatusResponse)                â”‚
â”‚ }                                                    â”‚
â”‚                                                      â”‚
â”‚ message CreateOrderRequest {                        â”‚
â”‚   string customer_name = 1;                         â”‚
â”‚   repeated string items = 2;                        â”‚
â”‚   double total = 3;                                 â”‚
â”‚ }                                                    â”‚
â”‚                                                      â”‚
â”‚ message CreateOrderResponse {                       â”‚
â”‚   string order_id = 1;                              â”‚
â”‚   string status = 2;                                â”‚
â”‚ }                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Checklist de Requisitos

- âœ… **TransmissÃ£o com gRPC**: Frontend â†” Gateway â†” Backend (100% gRPC)
- âœ… **Duas linguagens**: TypeScript/Node.js (Frontend + Gateway) â†” Python (Backend)
- âœ… **ComunicaÃ§Ã£o comprovada**: gRPC RPC calls entre serviÃ§os
- âœ… **DocumentaÃ§Ã£o**: ARCHITECTURE.md + README.md + CHANGES.md

---

**Desenvolvido com â¤ï¸ utilizando gRPC para comunicaÃ§Ã£o distribuÃ­da.**
